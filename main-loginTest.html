<script src="jquery-1.11.3.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {
  // define a generic Ajax error handler:
  // http://api.jquery.com/ajaxerror/
  $(document).ajaxError(function() {
    alert("Sorry, there was a problem!");
  });
  $("#createButton").click(function() {
    $.ajax({
      // The URL for the request -- note the simple REST API!
      // all URLs are relative to http://localhost:3000/
      url: "users/",
      type: "POST",
      dataType : "text", // this URL returns a plain text string, not JSON
      data : { name: $("#nameBox").val(),
               password: $("#passwordBox").val()
             },
      success: function( data ) {
        console.log("You received some data!", data);
        if (data == 'OK') {
          $("#status").html("Successfully created a new user!");
        } else {
          $("#status").html("Error: could not create a new user!");
        }
      },
    });
  });
  $("#readButton").click(function() {
    // From: http://learn.jquery.com/ajax/jquery-ajax-methods/
    // Using the core $.ajax() method
    $.ajax({
      // The URL for the request -- note the simple REST API!
      // all URLs are relative to http://localhost:3000/
      url: "users/" + $("#nameBox").val(),
      type: "GET",
      dataType : "json", // this URL returns data in JSON format
      success: function( data ) {
        console.log("You received some data!", data);
        if (data.name) {
          $("#nameDiv").html("My name is " + data.name);
          $("#ageDiv").html("My password is " + data.job);
        } else {
          $("#status").html("Error: could not find user!");
          // clear the profile display
          $("#nameDiv").html("");
          $("#ageDiv").html("");
          $("#profileImage").attr("src", "");
        }
      },
    });
  });
  $("#updateButton").click(function() {
    $.ajax({
      // The URL for the request -- note the simple REST API!
      // all URLs are relative to http://localhost:3000/
      url: "users/" + $("#nameBox").val(),
      type: "PUT",
      dataType : "text", // this URL returns a plain text string, not JSON
      data : { Password: $("#passwordBox").val(),
             },
      success: function( data ) {
        console.log("You received some data!", data);
        if (data == 'OK') {
          $("#status").html("Successfully updated user");
        } else {
          $("#status").html("Error: could not update user");
        }
      },
    });
  });
  $("#deleteButton").click(function() {
    $.ajax({
      // The URL for the request -- note the simple REST API!
      // all URLs are relative to http://localhost:3000/
      url: "users/" + $("#nameBox").val(),
      type: "DELETE",
      dataType : "text", // this URL returns a plain text string, not JSON
      success: function( data ) {
        console.log("You received some data!", data);
        if (data == 'OK') {
          $("#status").html("Successfully deleted!");
        } else {
          $("#status").html("Error: could not delete!");
        }
      },
    });
  });
  $("#loginButton").click(function() {
    // From: http://learn.jquery.com/ajax/jquery-ajax-methods/
    // Using the core $.ajax() method
    $.ajax({
      // The URL for the request -- note the simple REST API!
      // all URLs are relative to http://localhost:3000/
      url: "users/" + $("#loginNameBox").val(),
      type: "POST",
      dataType : "text", // this URL returns data in JSON format
      data : { name: $("#loginNameBox").val(),
               password: $("#loginPasswordBox").val()
             },
      success: function( data ) {
        console.log("You received some data!", data);
        if (data.name) {
          $("#nameDiv").html("Hello," + data.name, "!");
        } else {
          $("#status").html("Error: could not find user!");
          // clear the profile display
          $("#nameDiv").html("");
          $("#ageDiv").html("");
          $("#profileImage").attr("src", "");
        }
      },
    });
  });
});
</script>

</head>
  <body>
  <h1>Welcome to UR Watch my Fish!</h1>

    <p>
    Name: <input id="nameBox" type="text" size="20"/>
    Password: <input id="passwordBox" type="text" size="20"/>
    </p>

    <p>
    <button id="createButton">Create new user</button>
    <button id="readButton">Read user's profile</button>
    <button id="updateButton">Update user's profile</button>
    <button id="deleteButton">Delete user</button>
    </p>

    <p>
    Login:
    </p>
    <p>
    Name: <input id="loginNameBox" type="text" size="20"/>
    Password: <input id="loginPasswordBox" type="text" size="20"/>
    </p>
    <p>
    <button id="loginButton">Log in</button>
    </p>

    <!-- empty placeholders -->
    <div id="nameDiv"></div>
    <div id="ageDiv"></div>
    <img id="profileImage" style="width: 300px;"/>

    <hr/>

    <div id="status"></div>
  </body>
</html>